{% style %}
  .desktop-multicolumn-menu {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 0.5rem;
  }
  img {
    object-fit: cover;
  }
{% endstyle %}
<div class="desktop-multicolumn-menu">
  {%- liquid
    assign padding_multiplier = 1
    if section.settings.layout == 'section'
      assign padding_multiplier = 2
    endif
    assign desktop_tablet_padding = 100 | times: padding_multiplier | append: 'px'
    assign mobile_padding = 30 | times: padding_multiplier | append: 'px'
  -%}
  {%- capture sizes -%}
    (min-width: {{ settings.page_width }}px) calc(({{ settings.page_width }}px - {{ desktop_tablet_padding }}) / 2),
    (min-width: 750px) calc((100vw - {{ desktop_tablet_padding }}) / 2),
    calc(100vw - {{ mobile_padding }})
  {%- endcapture -%}
  {%- for block in section.blocks -%}
    <div style="display: flex; flex-direction: column;">
      {{
        block.settings.image
        | image_url: width: 3200
        | image_tag:
          sizes: sizes,
          widths: '50, 75, 100, 150, 200, 300, 400, 500, 750, 1000, 1250, 1500, 1750, 2000, 2250, 2500, 2750, 3000, 3200'
      }}
      {{ block.settings.header }}
    </div>
  {% endfor %}
</div>
{% schema %}
{
  "name": "Multicolumn Menu",
  "settings": [],
  "blocks": [
    {
      "type": "link",
      "name": "Page Link",
      "settings": [
        {
          "type": "text",
          "id": "header",
          "label": "Header"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Multicolumn Menu",
      "blocks": []
    }
  ]
}
{% endschema %}
